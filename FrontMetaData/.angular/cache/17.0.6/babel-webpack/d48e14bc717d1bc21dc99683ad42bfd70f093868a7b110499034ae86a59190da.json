{"ast":null,"code":"import { FormGroup, FormControl, Validators, ReactiveFormsModule, FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../core/services/policy.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction ListPolicyComponent_tr_19_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\")(6, \"button\", 14);\n    i0.ɵɵelement(7, \"i\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function ListPolicyComponent_tr_19_ng_container_1_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const policy_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.deletePolicy(policy_r1.idPolicy));\n    });\n    i0.ɵɵelement(9, \"i\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function ListPolicyComponent_tr_19_ng_container_1_Template_button_click_10_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const policy_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.editPolicy(policy_r1));\n    });\n    i0.ɵɵelement(11, \"i\", 18);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const policy_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(policy_r1.nom);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(policy_r1.rules);\n  }\n}\nfunction ListPolicyComponent_tr_19_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"td\")(2, \"input\", 19);\n    i0.ɵɵlistener(\"ngModelChange\", function ListPolicyComponent_tr_19_ng_container_2_Template_input_ngModelChange_2_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const policy_r1 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(policy_r1.nom = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(3, \"td\")(4, \"input\", 19);\n    i0.ɵɵlistener(\"ngModelChange\", function ListPolicyComponent_tr_19_ng_container_2_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const policy_r1 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(policy_r1.rules = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"td\", 20)(6, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function ListPolicyComponent_tr_19_ng_container_2_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const policy_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.saveChanges(policy_r1));\n    });\n    i0.ɵɵelement(7, \"i\", 22);\n    i0.ɵɵtext(8, \" Save \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const policy_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", policy_r1.nom);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", policy_r1.rules);\n  }\n}\nfunction ListPolicyComponent_tr_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 12);\n    i0.ɵɵtemplate(1, ListPolicyComponent_tr_19_ng_container_1_Template, 12, 2, \"ng-container\", 13)(2, ListPolicyComponent_tr_19_ng_container_2_Template, 9, 2, \"ng-container\", 13);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const policy_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !policy_r1.editing);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", policy_r1.editing);\n  }\n}\nexport class ListPolicyComponent {\n  constructor(policyService, router) {\n    this.policyService = policyService;\n    this.router = router;\n    this.listpolicy = [];\n    this.policy = [];\n    this.selectedPolicy = null;\n    // Initialisez votre formulaire ici\n    this.policyForm = new FormGroup({\n      nom: new FormControl('', [Validators.required]),\n      rules: new FormControl('', [Validators.required])\n    });\n  }\n  ngOnInit() {\n    this.loadPolicies();\n  }\n  loadPolicies() {\n    this.policyService.getPolicy().subscribe(data => {\n      this.listpolicy = data;\n    });\n  }\n  deletePolicy(id) {\n    if (confirm(\"Êtes-vous sûr de vouloir supprimer cette politique ?\")) {\n      this.policyService.deletePolicy(id).subscribe(() => {\n        console.log('Politique supprimée avec succès');\n        this.loadPolicies(); // Recharger la liste après la suppression\n      }, error => {\n        console.error('Erreur lors de la suppression de la politique', error);\n      });\n    }\n  }\n  switchToAddMode() {\n    console.log('Passer à l\\'ajout appelé');\n    this.router.navigate(['/Ajouter-policy']);\n  }\n  editPolicy(policy) {\n    policy.editing = true; // Activate edit mode for the user\n  }\n\n  saveChanges(policy) {\n    policy.editing = false; // Deactivate edit mode for the user\n    this.policyService.updatePolicy(policy).subscribe({\n      next: response => {\n        console.log('class modified successfully:', response);\n        // Handle successful response, e.g., display confirmation message\n      },\n\n      error: error => {\n        console.error('Error modifying class:', error);\n        // Handle error, e.g., display error message to user\n      }\n    });\n  }\n\n  applyFilter(event) {\n    const filterValue = event.target.value;\n    console.log(filterValue);\n    if (filterValue != \"\") {\n      this.listpolicy = this.listpolicy.filter(item => item.nom.toLowerCase().startsWith(filterValue.toLowerCase()));\n    }\n    if (filterValue == \"\") {\n      this.ngOnInit();\n    }\n  }\n  downloadPdf() {\n    this.policyService.downloadPolicyPdf().subscribe(data => {\n      const blob = new Blob([data], {\n        type: 'application/pdf'\n      });\n      // Créez un lien pour télécharger le blob\n      const downloadURL = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = downloadURL;\n      link.download = \"policies.pdf\";\n      link.click();\n    });\n  }\n  static #_ = this.ɵfac = function ListPolicyComponent_Factory(t) {\n    return new (t || ListPolicyComponent)(i0.ɵɵdirectiveInject(i1.PolicyService), i0.ɵɵdirectiveInject(i2.Router));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ListPolicyComponent,\n    selectors: [[\"app-list-policy\"]],\n    standalone: true,\n    features: [i0.ɵɵStandaloneFeature],\n    decls: 24,\n    vars: 1,\n    consts: [[1, \"filters\"], [1, \"input-group\", \"mb-3\"], [\"type\", \"text\", \"placeholder\", \"Search Keywords\", \"aria-label\", \"Search Keywords\", \"aria-describedby\", \"search-button\", 1, \"form-control\", 3, \"keyup\"], [\"type\", \"button\", \"id\", \"search-button\", 1, \"btn\", \"btn-outline-secondary\"], [1, \"container\", \"mt-5\"], [1, \"table-responsive\"], [1, \"table\", \"custom-table\"], [1, \"thead-dark\"], [\"class\", \"table-row\", 4, \"ngFor\", \"ngForOf\"], [1, \"pdf-download-icon\", 3, \"click\"], [1, \"fas\", \"fa-file-pdf\"], [\"routerLink\", \"/Statpolicies\", 1, \"btn\", \"btn-primary\"], [1, \"table-row\"], [4, \"ngIf\"], [1, \"btn\", \"icon-btn\"], [1, \"fas\", \"fa-plus-circle\", \"add-icon\"], [1, \"btn\", \"icon-btn\", 3, \"click\"], [1, \"fas\", \"fa-trash-alt\", \"delete-icon\"], [1, \"fas\", \"fa-edit\", \"edit-icon\"], [\"type\", \"text\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"text-center\"], [1, \"btn\", \"btn-success\", \"btn-sm\", 3, \"click\"], [1, \"fas\", \"fa-save\"]],\n    template: function ListPolicyComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h5\");\n        i0.ɵɵtext(2, \"Search\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 1)(4, \"input\", 2);\n        i0.ɵɵlistener(\"keyup\", function ListPolicyComponent_Template_input_keyup_4_listener($event) {\n          return ctx.applyFilter($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"button\", 3);\n        i0.ɵɵtext(6, \"Search\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(7, \"div\", 4)(8, \"div\", 5)(9, \"table\", 6)(10, \"thead\", 7)(11, \"tr\")(12, \"th\");\n        i0.ɵɵtext(13, \"Nom\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"th\");\n        i0.ɵɵtext(15, \"R\\u00E8gles\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"th\");\n        i0.ɵɵtext(17, \"Action\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(18, \"tbody\");\n        i0.ɵɵtemplate(19, ListPolicyComponent_tr_19_Template, 3, 2, \"tr\", 8);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(20, \"div\", 9);\n        i0.ɵɵlistener(\"click\", function ListPolicyComponent_Template_div_click_20_listener() {\n          return ctx.downloadPdf();\n        });\n        i0.ɵɵelement(21, \"i\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"button\", 11);\n        i0.ɵɵtext(23, \"Statistiques sur les politiques\");\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(19);\n        i0.ɵɵproperty(\"ngForOf\", ctx.listpolicy);\n      }\n    },\n    dependencies: [CommonModule, i3.NgForOf, i3.NgIf, ReactiveFormsModule, i4.DefaultValueAccessor, i4.NgControlStatus, FormsModule, i4.NgModel],\n    styles: [\"@charset \\\"UTF-8\\\";\\n.table-responsive[_ngcontent-%COMP%] {\\n  box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);\\n  border-radius: 8px;\\n  overflow: hidden;\\n}\\n\\n.custom-table[_ngcontent-%COMP%] {\\n  margin-bottom: 0;\\n  color: #565150;\\n}\\n\\n.thead-dark[_ngcontent-%COMP%]   th[_ngcontent-%COMP%] {\\n  background-color: #565150;\\n  color: white;\\n}\\n\\n.table-row[_ngcontent-%COMP%]:hover {\\n  background-color: #f5f5f5;\\n}\\n\\n.icon-btn[_ngcontent-%COMP%] {\\n  background: none;\\n  border: none;\\n  padding: 0;\\n  margin: 0 5px;\\n}\\n\\n.add-icon[_ngcontent-%COMP%] {\\n  color: green;\\n}\\n\\n.assign-icon[_ngcontent-%COMP%] {\\n  color: blue;\\n}\\n\\n.delete-icon[_ngcontent-%COMP%] {\\n  color: red;\\n}\\n\\n.edit-icon[_ngcontent-%COMP%] {\\n  color: orange;\\n}\\n\\n.download-btn[_ngcontent-%COMP%] {\\n  background-color: #565150;\\n  color: white;\\n  margin-top: 20px;\\n  border: none;\\n  border-radius: 5px;\\n  padding: 10px 15px;\\n}\\n\\n.download-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\\n  margin-right: 5px;\\n}\\n\\n.content-wrapper[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: start;\\n  justify-content: space-between;\\n}\\n\\n.table-container[_ngcontent-%COMP%] {\\n  flex: 1; \\n\\n}\\n\\n.container[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: flex-end;\\n}\\n\\n.table-responsive[_ngcontent-%COMP%] {\\n  box-shadow: 0 0 15px rgba(61, 91, 227, 0.1);\\n  border-radius: 8px;\\n  overflow: hidden;\\n  width: 100%;\\n}\\n\\n\\n\\n.pdf-download-icon[_ngcontent-%COMP%] {\\n  display: flex;\\n  margin-top: 10px; \\n\\n  cursor: pointer;\\n  justify-content: center;\\n  align-items: center;\\n  width: 50px; \\n\\n  height: 50px;\\n  background-color: #0056b3; \\n\\n  color: white; \\n\\n  border-radius: 25px; \\n\\n  cursor: pointer; \\n\\n  margin-top: 20px;\\n}\\n\\n.pdf-download-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\\n  font-size: 24px; \\n\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbGlzdC1wb2xpY3kvbGlzdC1wb2xpY3kuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsZ0JBQWdCO0FBQWhCO0VBQ0ksdUNBQUE7RUFDQSxrQkFBQTtFQUNBLGdCQUFBO0FBRUo7O0FBQ0U7RUFDRSxnQkFBQTtFQUNBLGNBQUE7QUFFSjs7QUFDRTtFQUNFLHlCQUFBO0VBQ0EsWUFBQTtBQUVKOztBQUNFO0VBQ0UseUJBQUE7QUFFSjs7QUFDRTtFQUNFLGdCQUFBO0VBQ0EsWUFBQTtFQUNBLFVBQUE7RUFDQSxhQUFBO0FBRUo7O0FBQ0U7RUFBWSxZQUFBO0FBR2Q7O0FBRkU7RUFBZSxXQUFBO0FBTWpCOztBQUxFO0VBQWUsVUFBQTtBQVNqQjs7QUFSRTtFQUFhLGFBQUE7QUFZZjs7QUFWRTtFQUNFLHlCQUFBO0VBQ0EsWUFBQTtFQUNBLGdCQUFBO0VBQ0EsWUFBQTtFQUNBLGtCQUFBO0VBQ0Esa0JBQUE7QUFhSjs7QUFWRTtFQUNFLGlCQUFBO0FBYUo7O0FBWEU7RUFDRSxhQUFBO0VBQ0Esa0JBQUE7RUFDQSw4QkFBQTtBQWNKOztBQVhFO0VBQ0UsT0FBQSxFQUFBLHdEQUFBO0FBY0o7O0FBWEU7RUFDRSxhQUFBO0VBQ0Esc0JBQUE7RUFDQSxxQkFBQTtBQWNKOztBQVhFO0VBQ0UsMkNBQUE7RUFDQSxrQkFBQTtFQUNBLGdCQUFBO0VBQ0EsV0FBQTtBQWNKOztBQVhFLHdDQUFBO0FBRUE7RUFDRSxhQUFBO0VBQ0EsZ0JBQUEsRUFBQSw4REFBQTtFQUNBLGVBQUE7RUFDQSx1QkFBQTtFQUNBLG1CQUFBO0VBQ0EsV0FBQSxFQUFBLHNDQUFBO0VBQ0EsWUFBQTtFQUNBLHlCQUFBLEVBQUEsa0VBQUE7RUFDQSxZQUFBLEVBQUEsdUJBQUE7RUFDQSxtQkFBQSxFQUFBLG1DQUFBO0VBQ0EsZUFBQSxFQUFBLHlDQUFBO0VBQ0EsZ0JBQUE7QUFhSjs7QUFWRTtFQUNFLGVBQUEsRUFBQSxzQkFBQTtBQWFKIiwic291cmNlc0NvbnRlbnQiOlsiLnRhYmxlLXJlc3BvbnNpdmUge1xyXG4gICAgYm94LXNoYWRvdzogMCAwIDE1cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xyXG4gICAgYm9yZGVyLXJhZGl1czogOHB4O1xyXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICB9XHJcbiAgXHJcbiAgLmN1c3RvbS10YWJsZSB7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAwO1xyXG4gICAgY29sb3I6ICM1NjUxNTA7XHJcbiAgfVxyXG4gIFxyXG4gIC50aGVhZC1kYXJrIHRoIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICM1NjUxNTA7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgfVxyXG4gIFxyXG4gIC50YWJsZS1yb3c6aG92ZXIge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2Y1ZjVmNTtcclxuICB9XHJcbiAgXHJcbiAgLmljb24tYnRuIHtcclxuICAgIGJhY2tncm91bmQ6IG5vbmU7XHJcbiAgICBib3JkZXI6IG5vbmU7XHJcbiAgICBwYWRkaW5nOiAwO1xyXG4gICAgbWFyZ2luOiAwIDVweDtcclxuICB9XHJcbiAgXHJcbiAgLmFkZC1pY29uIHsgY29sb3I6IGdyZWVuOyB9XHJcbiAgLmFzc2lnbi1pY29uIHsgY29sb3I6IGJsdWU7IH1cclxuICAuZGVsZXRlLWljb24geyBjb2xvcjogcmVkOyB9XHJcbiAgLmVkaXQtaWNvbiB7IGNvbG9yOiBvcmFuZ2U7IH1cclxuICBcclxuICAuZG93bmxvYWQtYnRuIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICM1NjUxNTA7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBtYXJnaW4tdG9wOiAyMHB4O1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gICAgcGFkZGluZzogMTBweCAxNXB4O1xyXG4gIH1cclxuICBcclxuICAuZG93bmxvYWQtYnRuIGkge1xyXG4gICAgbWFyZ2luLXJpZ2h0OiA1cHg7XHJcbiAgfVxyXG4gIC5jb250ZW50LXdyYXBwZXIge1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGFsaWduLWl0ZW1zOiBzdGFydDtcclxuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxuICB9XHJcbiAgXHJcbiAgLnRhYmxlLWNvbnRhaW5lciB7XHJcbiAgICBmbGV4OiAxOyAvKiBBc3N1cmUgcXVlIGxlIHRhYmxlYXUgcHJlbmQgbGEgbWFqb3JpdMODwqkgZGUgbCdlc3BhY2UgKi9cclxuICB9XHJcbiAgXHJcbiAgLmNvbnRhaW5lciB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgIGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcclxuICB9XHJcbiAgXHJcbiAgLnRhYmxlLXJlc3BvbnNpdmUge1xyXG4gICAgYm94LXNoYWRvdzogMCAwIDE1cHggcmdiYSg2MSwgOTEsIDIyNywgMC4xKTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDhweDtcclxuICAgIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICB9XHJcbiAgXHJcbiAgLyogTGVzIGF1dHJlcyBzdHlsZXMgcmVzdGVudCBpbmNoYW5nw4PCqXMgKi9cclxuICBcclxuICAucGRmLWRvd25sb2FkLWljb24ge1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIG1hcmdpbi10b3A6IDEwcHg7IC8qIEFqdXN0ZXIgc2Vsb24gbGUgYmVzb2luIHBvdXIgbCdlc3BhY2VtZW50IGF2ZWMgbGUgdGFibGVhdSAqL1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgd2lkdGg6IDUwcHg7IC8qIFRhaWxsZSBkZSBsJ2ljw4PCtG5lIGV0IGR1IGNvbnRlbmV1ciAqL1xyXG4gICAgaGVpZ2h0OiA1MHB4O1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzAwNTZiMzsgLyogQ291bGV1ciBkZSBmb25kIGlkZW50aXF1ZSBhdSBib3V0b24gZXQgw4PCoCBsJ2VuLXTDg8KqdGUgZHUgdGFibGVhdSAqL1xyXG4gICAgY29sb3I6IHdoaXRlOyAvKiBDb3VsZXVyIGRlIGwnaWPDg8K0bmUgKi9cclxuICAgIGJvcmRlci1yYWRpdXM6IDI1cHg7IC8qIFJlbmRyZSBsZSBjb250ZW5ldXIgY2lyY3VsYWlyZSAqL1xyXG4gICAgY3Vyc29yOiBwb2ludGVyOyAvKiBJbmRpcXVlciBxdWUgbCfDg8KpbMODwqltZW50IGVzdCBjbGlxdWFibGUgKi9cclxuICAgIG1hcmdpbi10b3A6IDIwcHg7XHJcbiAgfVxyXG4gIFxyXG4gIC5wZGYtZG93bmxvYWQtaWNvbiBpIHtcclxuICAgIGZvbnQtc2l6ZTogMjRweDsgLyogVGFpbGxlIGRlIGwnaWPDg8K0bmUgKi9cclxuICB9Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["FormGroup","FormControl","Validators","ReactiveFormsModule","FormsModule","CommonModule","i0","ɵɵelementContainerStart","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵlistener","ListPolicyComponent_tr_19_ng_container_1_Template_button_click_8_listener","ɵɵrestoreView","_r6","policy_r1","ɵɵnextContext","$implicit","ctx_r4","ɵɵresetView","deletePolicy","idPolicy","ListPolicyComponent_tr_19_ng_container_1_Template_button_click_10_listener","ctx_r7","editPolicy","ɵɵelementContainerEnd","ɵɵadvance","ɵɵtextInterpolate","nom","rules","ListPolicyComponent_tr_19_ng_container_2_Template_input_ngModelChange_2_listener","$event","_r12","ListPolicyComponent_tr_19_ng_container_2_Template_input_ngModelChange_4_listener","ListPolicyComponent_tr_19_ng_container_2_Template_button_click_6_listener","ctx_r15","saveChanges","ɵɵproperty","ɵɵtemplate","ListPolicyComponent_tr_19_ng_container_1_Template","ListPolicyComponent_tr_19_ng_container_2_Template","editing","ListPolicyComponent","constructor","policyService","router","listpolicy","policy","selectedPolicy","policyForm","required","ngOnInit","loadPolicies","getPolicy","subscribe","data","id","confirm","console","log","error","switchToAddMode","navigate","updatePolicy","next","response","applyFilter","event","filterValue","target","value","filter","item","toLowerCase","startsWith","downloadPdf","downloadPolicyPdf","blob","Blob","type","downloadURL","window","URL","createObjectURL","link","document","createElement","href","download","click","_","ɵɵdirectiveInject","i1","PolicyService","i2","Router","_2","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","ListPolicyComponent_Template","rf","ctx","ListPolicyComponent_Template_input_keyup_4_listener","ListPolicyComponent_tr_19_Template","ListPolicyComponent_Template_div_click_20_listener","i3","NgForOf","NgIf","i4","DefaultValueAccessor","NgControlStatus","NgModel","styles"],"sources":["C:\\PIDataCatalogDREAMIT\\FrontMetaData\\src\\app\\list-policy\\list-policy.component.ts","C:\\PIDataCatalogDREAMIT\\FrontMetaData\\src\\app\\list-policy\\list-policy.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormGroup, FormControl, Validators, ReactiveFormsModule, NgModel, FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { Policy } from '../core/models/policy';\nimport { PolicyService } from '../core/services/policy.service';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-list-policy',\n  standalone: true,\n  imports: [CommonModule, ReactiveFormsModule , FormsModule], // Utilisez ReactiveFormsModule ici\n  templateUrl: './list-policy.component.html',\n  styleUrls: ['./list-policy.component.scss']\n})\nexport class ListPolicyComponent implements OnInit {\n  listpolicy: Policy[] = [];\n  policy:any[] = [];\n  policyForm: FormGroup;\n  selectedPolicy: Policy | null = null;\n\n  constructor(private policyService: PolicyService ,private router: Router ) {\n    // Initialisez votre formulaire ici\n    this.policyForm = new FormGroup({\n      nom: new FormControl('', [Validators.required]),\n      rules: new FormControl('', [Validators.required])\n    });\n  }\n\n  ngOnInit(): void {\n    this.loadPolicies();\n  }\n\n  \n\n  loadPolicies(): void {\n    this.policyService.getPolicy().subscribe((data: Policy[]) => {\n      this.listpolicy = data;\n    });\n  }\n\n\n  deletePolicy(id: number): void {\n    if(confirm(\"Êtes-vous sûr de vouloir supprimer cette politique ?\")) {\n      this.policyService.deletePolicy(id).subscribe(() => {\n        console.log('Politique supprimée avec succès');\n        this.loadPolicies(); // Recharger la liste après la suppression\n      }, error => {\n        console.error('Erreur lors de la suppression de la politique', error);\n      });\n    }\n  }\n  switchToAddMode(): void {\n    console.log('Passer à l\\'ajout appelé');\n    this.router.navigate(['/Ajouter-policy']);\n  }\n  \n  editPolicy(policy: any): void {\n    policy.editing = true; // Activate edit mode for the user\n  }\n\n  saveChanges(policy: any): void {\n    policy.editing = false; // Deactivate edit mode for the user\n    this.policyService.updatePolicy(policy).subscribe({\n      next: (response) => {\n        console.log('class modified successfully:', response);\n        // Handle successful response, e.g., display confirmation message\n      },\n      error: (error) => {\n        console.error('Error modifying class:', error);\n        // Handle error, e.g., display error message to user\n      }\n    });\n  }\n  applyFilter(event: Event) {\n    const filterValue = (event.target as HTMLInputElement).value;\n    console.log(filterValue);\n    if(filterValue!=\"\"){\n      this.listpolicy = this.listpolicy.filter(item => item.nom\n        .toLowerCase().startsWith(filterValue\n        .toLowerCase()));\n    }\n    if(filterValue==\"\") {\n      this.ngOnInit();\n    }\n  }\n  downloadPdf(): void {\n    this.policyService.downloadPolicyPdf().subscribe(data => {\n      const blob = new Blob([data], { type: 'application/pdf' });\n\n      // Créez un lien pour télécharger le blob\n      const downloadURL = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = downloadURL;\n      link.download = \"policies.pdf\";\n      link.click();\n    });\n  }\n}\n","<div class=\"filters\">\n  <h5>Search</h5>\n  <div class=\"input-group mb-3\">\n    <input (keyup)=\"applyFilter($event)\" type=\"text\" class=\"form-control\" placeholder=\"Search Keywords\" aria-label=\"Search Keywords\" aria-describedby=\"search-button\">\n    <button class=\"btn btn-outline-secondary\" type=\"button\" id=\"search-button\">Search</button>\n  </div>\n</div>\n\n<div class=\"container mt-5\">\n  <div class=\"table-responsive\">\n    <table class=\"table custom-table\">\n      <thead class=\"thead-dark\">\n        <tr>\n          <th>Nom</th>\n          <th>Règles</th>\n          <th>Action</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor=\"let policy of listpolicy\" class=\"table-row\">\n          <ng-container *ngIf=\"!policy.editing\">\n            <td>{{ policy.nom }}</td>\n            <td>{{ policy.rules }}</td>\n            <td>\n              <button class=\"btn icon-btn\" >\n                <i class=\"fas fa-plus-circle add-icon\"></i>\n              </button>\n              <button class=\"btn icon-btn\" (click)=\"deletePolicy(policy.idPolicy)\">\n                <i class=\"fas fa-trash-alt delete-icon\"></i>\n              </button>\n              <button class=\"btn icon-btn\" (click)=\"editPolicy(policy)\">\n                <i class=\"fas fa-edit edit-icon\"></i>\n              </button>\n            </td>\n          </ng-container>\n          <ng-container *ngIf=\"policy.editing\">\n            <td><input type=\"text\" class=\"form-control\" [(ngModel)]=\"policy.nom\" /></td>\n            <td><input type=\"text\" class=\"form-control\" [(ngModel)]=\"policy.rules\" /></td>\n            <td class=\"text-center\">\n              <button (click)=\"saveChanges(policy)\" class=\"btn btn-success btn-sm\">\n                <i class=\"fas fa-save\"></i> Save\n              </button>\n            </td>\n          </ng-container>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n\n  <div class=\"pdf-download-icon\" (click)=\"downloadPdf()\">\n    <i class=\"fas fa-file-pdf\"></i>\n  </div>\n   \n  <button class=\"btn btn-primary\" routerLink=\"/Statpolicies\">Statistiques sur les politiques</button>\n</div>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}